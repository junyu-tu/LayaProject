!function(){"use strict";class t extends Laya.Script{constructor(){super(),this.isUp=!1,this.isDown=!1}onAwake(){console.log(this.owner.name),this.randomUp()}onUpdate(){this.isUp&&(this.owner.transform.translate(new Laya.Vector3(0,.1,0)),this.owner.transform.localPosition.y>=2.5&&(this.isUp=!1,this.owner.transform.localPosition=new Laya.Vector3(0,2.5,0),Laya.stage.timerOnce(1e3,this,function(){this.isDown=!0}))),this.isDown&&(this.owner.transform.translate(new Laya.Vector3(0,-.1,0)),this.owner.transform.localPosition.y<=0&&(this.isDown=!1,this.owner.transform.localPosition=new Laya.Vector3(0,0,0),this.randomUp()))}randomUp(){var t=Math.random();Laya.stage.timerOnce(6e3*t,this,function(){this.isUp=!0})}Knock(){this.owner.transform.localPosition=new Laya.Vector3,this.isUp=!1,this.isDown=!1}}class e extends Laya.Script{constructor(){super()}onAwake(){Laya.stage.timerOnce(2e3,this,function(){this.owner.destroy()})}}class a extends Laya.Script{constructor(){super()}Init(t,e,a){this.camera=t,this.scene=e,this.physicsSimulation=e.physicsSimulation,this.effect=a}onAwake(){this.ray=new Laya.Ray(new Laya.Vector3,new Laya.Vector3),this.hitResult=new Laya.HitResult,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on("GameOver",this,function(){this.isGameOver=!0}),Laya.stage.on("RestartGame",this,function(){this.isGameOver=!1})}onDown(){this.isGameOver||(this.camera.viewportPointToRay(new Laya.Vector2(Laya.stage.mouseX,Laya.stage.mouseY),this.ray),this.physicsSimulation.rayCast(this.ray,this.hitResult)&&this.hitResult.collider.owner.transform.localPosition.y>=2&&(this.targetPos=this.hitResult.collider.owner.transform.position,this.targetPos.y=.35,this.owner.transform.position=new Laya.Vector3(this.targetPos.x,7,this.targetPos.z),Laya.Tween.to(this.owner.transform,{localPositionX:this.targetPos.x,localPositionY:this.targetPos.y,localPositionZ:this.targetPos.z},100,Laya.Ease.linearIn,Laya.Handler.create(this,this.DiShuHandleFunction),0,!0)))}DiShuHandleFunction(){this.hitResult.collider.owner.getComponent(t).Knock();var a=Laya.Sprite3D.instantiate(this.effect,this.scene);a.transform.position=this.targetPos,a.addComponent(e),Laya.stage.event("AddScore"),Laya.SoundManager.playSound("https://dadishu.oss-cn-beijing.aliyuncs.com/hit.mp3",1),Laya.Tween.to(this.owner.transform,{localPositionX:this.targetPos.x,localPositionY:7,localPositionZ:this.targetPos.z},100,Laya.Ease.linearIn,Laya.Handler.create(this,function(){}),0,!0)}}class s extends Laya.Script{constructor(){super()}onAwake(){Laya.Scene3D.load("res/scene/LayaScene_Main/Conventional/Main.ls",Laya.Handler.create(this,this.onLoadSceneFinish))}onLoadSceneFinish(e){Laya.SoundManager.playMusic("https://dadishu.oss-cn-beijing.aliyuncs.com/bgm.mp3",0),e.zOrder=-1,console.log("load Success"),Laya.stage.addChild(e);for(var s=e.getChildByName("Moles"),i=0;i<s.numChildren;i++)s.getChildAt(i).getChildAt(0).addComponent(t);var o=e.getChildByName("Main Camera"),n=e.getChildByName("Explosion"),r=Laya.Sprite3D.instantiate(n);n.active=!1,e.getChildByName("Hummer").addComponent(a).Init(o,e,r)}}class i extends Laya.Script{constructor(){super(),this.txt_Time=null,this.txt_Score=null,this.gameoverPanel=null,this.btn_restart=null}onAwake(){Laya.stage.on("AddScore",this,this.addScore),this.score=0,this.timer=0,this.time=60,this.btn_restart.on(Laya.Event.CLICK,this,this.restartGame)}onUpdate(){this.time<0&&this.gameover(),this.timer+=Laya.timer.delta/1e3,this.timer>1&&(this.timer=0,this.time--,this.txt_Time.text="Time:"+this.time+" s")}addScore(){this.score++,this.txt_Score.text="Score："+this.score}gameover(){this.txt_Time.visible=!1,this.txt_Score.visible=!1,this.gameoverPanel.visible=!0,Laya.stage.event("GameOver")}restartGame(){this.txt_Time.visible=!0,this.txt_Score.visible=!0,this.gameoverPanel.visible=!1,this.score=0,this.timer=0,this.time=60,this.txt_Time.text="Time:"+this.time+" s",this.txt_Score.text="Score："+this.score,Laya.stage.event("RestartGame")}}class o{static init(){let t=Laya.ClassUtils.regClass;t("scripts/GameRoot.js",s),t("scripts/UICtrl.js",i)}}o.width=1920,o.height=1080,o.scaleMode="fixedheight",o.screenMode="horizontal",o.alignV="middle",o.alignH="center",o.startScene="GameRoot.scene",o.sceneRoot="",o.debug=!1,o.stat=!1,o.physicsDebug=!1,o.exportSceneToJson=!0,o.init();new class{constructor(){window.Laya3D?Laya3D.init(o.width,o.height):Laya.init(o.width,o.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=o.scaleMode,Laya.stage.screenMode=o.screenMode,Laya.stage.alignV=o.alignV,Laya.stage.alignH=o.alignH,Laya.URL.exportSceneToJson=o.exportSceneToJson,(o.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),o.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),o.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){o.startScene&&Laya.Scene.open(o.startScene)}}}();