{
  "code": "import StartPanel from \"./StartPanel\";\r\nimport GameManager from \"./GameManager\";\r\nimport Player from \"./Player\";\r\nimport GamePanel from \"./GamePanel\";\r\nexport default class GameOverPanel extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.txt_GameOver = null;\r\n        this.txt_Score = null;\r\n        this.txt_HightScore = null;\r\n    }\r\n    onAwake() {\r\n        this.txt_GameOver = this.owner.getChildByName(\"txt_GameOver\");\r\n        this.txt_Score = this.owner.getChildByName(\"txt_Score\");\r\n        this.txt_HightScore = this.owner.getChildByName(\"txt_HightScore\");\r\n        Laya.loader.load(\"hemiheadbdit.ttf\", Laya.Handler.create(this, function (font) {\r\n            this.txt_Score.font = font.fontName;\r\n            this.txt_HightScore.font = font.fontName;\r\n            this.txt_GameOver.font = font.fontName;\r\n        }), null, Laya.Loader.TTF);\r\n        this.owner.getChildByName(\"btn_Home\").on(Laya.Event.CLICK, this, this.homeBtnClick);\r\n        this.owner.getChildByName(\"btn_Restart\").on(Laya.Event.CLICK, this, this.restartBtnClick);\r\n        Laya.stage.on(\"GameOver\", this, this.gameOver);\r\n    }\r\n    homeBtnClick() {\r\n        this.owner.visible = false;\r\n        this.owner.parent.getChildByName(\"StartPanel\").getComponent(StartPanel).homeBtnClick();\r\n        this.owner.parent.getComponent(GameManager).homeBtnClick();\r\n        this.owner.parent.getChildByName(\"Player\").getComponent(Player).ResetCarPos();\r\n    }\r\n    restartBtnClick() {\r\n        Laya.SoundManager.playSound(\"res/Sounds/ButtonClick.ogg\", 1);\r\n        this.owner.visible = false;\r\n        this.owner.parent.getComponent(GameManager).restartBtnClick();\r\n        Laya.stage.event(\"StartGame\");\r\n        this.owner.parent.getChildByName(\"Player\").getComponent(Player).ResetCarPos();\r\n    }\r\n    gameOver() {\r\n        Laya.SoundManager.playSound(\"res/Sounds/ButtonClick.ogg\", 1);\r\n        this.owner.visible = true;\r\n        var curScore = this.owner.parent.getChildByName(\"GamePanel\").getComponent(GamePanel).score;\r\n        this.txt_Score.text = \"Score:\" + curScore;\r\n        var hightScore = Number(Laya.LocalStorage.getItem(\"BestScore\"));\r\n        if (curScore > hightScore) {\r\n            Laya.LocalStorage.setItem(\"BestScore\", curScore);\r\n            this.txt_HightScore.text = \"HightScore:\" + curScore;\r\n        }\r\n        else {\r\n            this.txt_HightScore.text = \"HightScore:\" + hightScore;\r\n        }\r\n        Laya.LocalStorage.setItem(\"LastScore\", curScore);\r\n    }\r\n}\r\n",
  "references": [
    "D:/SikiLaya/2DCarlearnTS/src/scripts/StartPanel.ts",
    "D:/SikiLaya/2DCarlearnTS/src/scripts/GameManager.ts",
    "D:/SikiLaya/2DCarlearnTS/src/scripts/Player.ts",
    "D:/SikiLaya/2DCarlearnTS/src/scripts/GamePanel.ts"
  ]
}
