{
  "code": "import Car from \"./Car\";\r\nexport default class Player extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.playerMinX = 200;\r\n        this.playerMaxX = 880;\r\n        this.isStartGame = false;\r\n        this.initXArr = [260, 450, 640, 820];\r\n        this.initY = 1360;\r\n        this.rig = null;\r\n        this.owner = this.owner;\r\n    }\r\n    onAwake() {\r\n        Laya.SoundManager.playMusic(\"res/Sounds/FutureWorld_Dark_Loop_03.ogg\", 0);\r\n        Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown);\r\n        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        Laya.stage.on(\"StartGame\", this, function () {\r\n            this.isStartGame = true;\r\n        });\r\n        Laya.stage.on(\"Pause\", this, function () {\r\n            this.isStartGame = false;\r\n        });\r\n        this.rig = this.owner.getComponent(Laya.RigidBody);\r\n        this.ResetCarPos();\r\n    }\r\n    onUpdate() {\r\n        if (this.owner.x > this.playerMaxX) {\r\n            this.owner.x = this.playerMaxX;\r\n        }\r\n        if (this.owner.x < this.playerMinX) {\r\n            this.owner.x = this.playerMinX;\r\n        }\r\n    }\r\n    ResetCarPos() {\r\n        var index = this.getRandom(0, this.initXArr.length - 1);\r\n        this.owner.pos(this.initXArr[index], this.initY);\r\n    }\r\n    mouseDown() {\r\n        if (this.isStartGame == false) {\r\n            return;\r\n        }\r\n        if (Laya.stage.mouseY < 500) {\r\n            return;\r\n        }\r\n        var mouseX = Laya.stage.mouseX;\r\n        var force = 0;\r\n        if (mouseX < Laya.stage.width / 2) {\r\n            console.log(\"Left\");\r\n            force = -1;\r\n        }\r\n        else {\r\n            console.log(\"right\");\r\n            force = 1;\r\n        }\r\n        this.rig.linearVelocity = { x: force * 8, y: 0 };\r\n        Laya.Tween.to(this.owner, { rotation: force * 25 }, 300);\r\n    }\r\n    mouseUp() {\r\n        this.rig.linearVelocity = { x: 0, y: 0 };\r\n        Laya.Tween.to(this.owner, { rotation: 0 }, 300);\r\n    }\r\n    getRandom(min, max) {\r\n        var value = Math.random() * (max - min);\r\n        value = Math.round(value);\r\n        return min + value;\r\n    }\r\n    onTriggerEnter(other) {\r\n        if (other.label == \"Car\") {\r\n            Laya.SoundManager.playSound(\"res/Sounds/CarCrash.ogg\", 1);\r\n            Laya.stage.event(\"GameOver\");\r\n            this.isStartGame = false;\r\n        }\r\n        if (other.label == \"Coin\") {\r\n            Laya.SoundManager.playSound(\"res/Sounds/Bonus.ogg\", 1);\r\n            other.owner.removeSelf();\r\n            other.owner.getComponent(Car).recover();\r\n            Laya.stage.event(\"AddScore\", 10);\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/SikiLaya/2DCarlearnTS/src/scripts/Car.ts"
  ]
}
