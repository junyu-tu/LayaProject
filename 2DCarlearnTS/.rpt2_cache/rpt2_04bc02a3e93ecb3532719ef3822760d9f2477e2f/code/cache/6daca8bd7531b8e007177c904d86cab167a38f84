{
  "code": "import Car from \"./Car\";\r\nexport default class GameMamager extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.carPrefabArr = [];\r\n        this.isStartGame = false;\r\n        this.spawnCarArr = [];\r\n    }\r\n    onAwake() {\r\n        Laya.stage.on(\"StartGame\", this, function () { this.isStartGame = true; });\r\n        Laya.stage.on(\"GameOver\", this, this.gameOver);\r\n        this.loadCarPrefab();\r\n    }\r\n    gameOver() {\r\n        this.isStartGame = false;\r\n        this.spawnCarArr.forEach(element => {\r\n            element.removeSelf();\r\n        });\r\n    }\r\n    homeBtnClick() {\r\n        this.gameOver();\r\n    }\r\n    restartBtnClick() {\r\n        this.spawnCarArr.forEach(element => {\r\n            element.removeSelf();\r\n        });\r\n    }\r\n    loadCarPrefab() {\r\n        var pathArr = [\r\n            \"prefab/Car_1.json\",\r\n            \"prefab/Car_2.json\",\r\n            \"prefab/Car_3.json\",\r\n            \"prefab/Car_4.json\",\r\n            \"prefab/Car_5.json\",\r\n            \"prefab/Car_6.json\",\r\n            \"prefab/Coin.json\",\r\n        ];\r\n        var infoArr = [];\r\n        for (var i = 0; i < pathArr.length; i++) {\r\n            infoArr.push({ url: pathArr[i], type: Laya.Loader.PREFAB });\r\n        }\r\n        Laya.loader.load(infoArr, Laya.Handler.create(this, function (result) {\r\n            console.log(result);\r\n            for (var i = 0; i < pathArr.length; i++) {\r\n                this.carPrefabArr.push(Laya.loader.getRes(pathArr[i]));\r\n            }\r\n            console.log(this.carPrefabArr);\r\n            this.ranTime = this.getRandom(500, 1000);\r\n            Laya.timer.loop(this.ranTime, this, function () {\r\n                this.spawn();\r\n                this.ranTime = this.getRandom(500, 1000);\r\n            });\r\n        }));\r\n    }\r\n    spawn() {\r\n        if (!this.isStartGame)\r\n            return;\r\n        var arrX = [190, 380, 570, 760];\r\n        var arrY = -300;\r\n        var x = arrX[this.getRandom(0, arrX.length - 1)];\r\n        var carIndex = this.getRandom(0, this.carPrefabArr.length - 1);\r\n        var car = Laya.Pool.getItemByCreateFun(carIndex.toString(), function () {\r\n            return this.carPrefabArr[carIndex].create();\r\n        }, this);\r\n        Laya.stage.getChildAt(0).getChildAt(0).addChild(car);\r\n        car.pos(x, arrY);\r\n        car.getComponent(Car).Init(carIndex.toString());\r\n        this.spawnCarArr.push(car);\r\n    }\r\n    getRandom(min, max) {\r\n        var value = Math.random() * (max - min);\r\n        value = Math.round(value);\r\n        return min + value;\r\n    }\r\n}\r\n",
  "references": [
    "D:/SikiLaya/2DCarlearnTS/src/scripts/Car.ts"
  ]
}
