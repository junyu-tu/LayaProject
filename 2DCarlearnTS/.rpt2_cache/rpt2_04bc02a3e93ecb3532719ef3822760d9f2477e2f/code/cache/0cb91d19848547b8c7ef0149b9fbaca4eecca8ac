{
  "code": "export default class GamePanel extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.score = 0;\r\n        this.txt_Best = null;\r\n        this.txt_Last = null;\r\n        this.txt_Score = null;\r\n    }\r\n    onAwake() {\r\n        this.txt_Best = this.owner.getChildByName(\"txt_Best\");\r\n        this.txt_Last = this.owner.getChildByName(\"txt_Last\");\r\n        this.txt_Score = this.owner.getChildByName(\"txt_Score\");\r\n        this.owner.getChildByName(\"btn_Pause\").on(Laya.Event.CLICK, this, this.pauseBtnClick);\r\n        Laya.loader.load(\"hemiheadbdit.ttf\", Laya.Handler.create(this, function (font) {\r\n            console.log(font);\r\n            this.txt_Best.font = font.fontName;\r\n            this.txt_Last.font = font.fontName;\r\n            this.txt_Score.font = font.fontName;\r\n        }), null, Laya.Loader.TTF);\r\n        this.owner.visible = false;\r\n        Laya.stage.on(\"StartGame\", this, function () {\r\n            this.owner.visible = true;\r\n            this.Init();\r\n        });\r\n        Laya.stage.on(\"GameOver\", this, function () {\r\n            this.owner.visible = false;\r\n        });\r\n        Laya.timer.loop(300, this, this.AddScore);\r\n        Laya.stage.on(\"AddScore\", this, this.AddScore);\r\n    }\r\n    Init() {\r\n        this.txt_Last.text = \"Last:\" + Number(Laya.LocalStorage.getItem(\"LastScore\"));\r\n        this.txt_Best.text = \"Best:\" + Number(Laya.LocalStorage.getItem(\"BestScore\"));\r\n        this.txt_Score.text = \"0\";\r\n        this.score = 0;\r\n    }\r\n    AddScore(score = 1) {\r\n        if (this.owner.visible == false)\r\n            return;\r\n        this.score += score;\r\n        this.txt_Score.text = this.score;\r\n    }\r\n    pauseBtnClick() {\r\n        Laya.SoundManager.playSound(\"res/Sounds/ButtonClick.ogg\", 1);\r\n        Laya.timer.pause();\r\n        this.owner.visible = false;\r\n        Laya.stage.event(\"Pause\");\r\n    }\r\n}\r\n",
  "references": []
}
